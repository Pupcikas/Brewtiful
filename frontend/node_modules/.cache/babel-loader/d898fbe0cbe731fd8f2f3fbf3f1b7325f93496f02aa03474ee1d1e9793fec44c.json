{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\CartModal.js\",\n  _s = $RefreshSig$();\n// CartModal.js\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"react-modal\";\nimport \"./CartModal.css\"; // Create this CSS file for styling\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nModal.setAppElement(\"#root\"); // Adjust if your root element has a different id\n\nexport default function CartModal({\n  item,\n  ingredients,\n  onClose,\n  onOrder\n}) {\n  _s();\n  const [selectedIngredients, setSelectedIngredients] = useState({});\n  const [totalPrice, setTotalPrice] = useState(item.Price);\n  useEffect(() => {\n    // Initialize selectedIngredients with default quantities\n    const initialIngredients = {};\n    item.IngredientIds.forEach(id => {\n      const ing = ingredients.find(i => i.Id === id);\n      initialIngredients[id] = ing ? ing.DefaultQuantity : 0;\n    });\n    setSelectedIngredients(initialIngredients);\n  }, [item, ingredients]);\n  useEffect(() => {\n    // Calculate total price based on ingredient modifications\n    let price = item.Price;\n    Object.keys(selectedIngredients).forEach(id => {\n      const ing = ingredients.find(i => i.Id === parseInt(id));\n      if (ing) {\n        const extra = selectedIngredients[id] - ing.DefaultQuantity;\n        price += extra * ing.ExtraCost;\n      }\n    });\n    setTotalPrice(price);\n  }, [selectedIngredients, ingredients, item.Price]);\n  const handleIngredientChange = (id, delta) => {\n    setSelectedIngredients(prev => ({\n      ...prev,\n      [id]: Math.max(0, prev[id] + delta)\n    }));\n  };\n  const handleOrder = () => {\n    // Prepare the item with selected ingredient counts\n    const orderedItem = {\n      ...item,\n      selectedIngredients,\n      totalPrice\n    };\n    onOrder(orderedItem);\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: true,\n    onRequestClose: onClose,\n    contentLabel: \"Customize Item\",\n    className: \"cart-modal\",\n    overlayClassName: \"cart-modal-overlay\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: item.Name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), item.PictureUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: item.PictureUrl,\n      alt: item.Name,\n      className: \"modal-item-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ingredients-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), item.IngredientIds.map(id => {\n        const ing = ingredients.find(i => i.Id === id);\n        if (!ing) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ingredient-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: ing.Name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleIngredientChange(id, -1),\n              disabled: selectedIngredients[id] === 0,\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: selectedIngredients[id]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleIngredientChange(id, 1),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"+$\", ((selectedIngredients[id] - ing.DefaultQuantity) * ing.ExtraCost).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"total-price\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total: $\", totalPrice.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleOrder,\n        children: \"Add to Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(CartModal, \"p3LP1Q1GS+mPz044ubn3dHB133I=\");\n_c = CartModal;\nvar _c;\n$RefreshReg$(_c, \"CartModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","jsxDEV","_jsxDEV","setAppElement","CartModal","item","ingredients","onClose","onOrder","_s","selectedIngredients","setSelectedIngredients","totalPrice","setTotalPrice","Price","initialIngredients","IngredientIds","forEach","id","ing","find","i","Id","DefaultQuantity","price","Object","keys","parseInt","extra","ExtraCost","handleIngredientChange","delta","prev","Math","max","handleOrder","orderedItem","isOpen","onRequestClose","contentLabel","className","overlayClassName","children","Name","fileName","_jsxFileName","lineNumber","columnNumber","PictureUrl","src","alt","map","onClick","disabled","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/CartModal.js"],"sourcesContent":["// CartModal.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Modal from \"react-modal\";\r\nimport \"./CartModal.css\"; // Create this CSS file for styling\r\n\r\nModal.setAppElement(\"#root\"); // Adjust if your root element has a different id\r\n\r\nexport default function CartModal({ item, ingredients, onClose, onOrder }) {\r\n  const [selectedIngredients, setSelectedIngredients] = useState({});\r\n  const [totalPrice, setTotalPrice] = useState(item.Price);\r\n\r\n  useEffect(() => {\r\n    // Initialize selectedIngredients with default quantities\r\n    const initialIngredients = {};\r\n    item.IngredientIds.forEach((id) => {\r\n      const ing = ingredients.find((i) => i.Id === id);\r\n      initialIngredients[id] = ing ? ing.DefaultQuantity : 0;\r\n    });\r\n    setSelectedIngredients(initialIngredients);\r\n  }, [item, ingredients]);\r\n\r\n  useEffect(() => {\r\n    // Calculate total price based on ingredient modifications\r\n    let price = item.Price;\r\n    Object.keys(selectedIngredients).forEach((id) => {\r\n      const ing = ingredients.find((i) => i.Id === parseInt(id));\r\n      if (ing) {\r\n        const extra = selectedIngredients[id] - ing.DefaultQuantity;\r\n        price += extra * ing.ExtraCost;\r\n      }\r\n    });\r\n    setTotalPrice(price);\r\n  }, [selectedIngredients, ingredients, item.Price]);\r\n\r\n  const handleIngredientChange = (id, delta) => {\r\n    setSelectedIngredients((prev) => ({\r\n      ...prev,\r\n      [id]: Math.max(0, prev[id] + delta),\r\n    }));\r\n  };\r\n\r\n  const handleOrder = () => {\r\n    // Prepare the item with selected ingredient counts\r\n    const orderedItem = {\r\n      ...item,\r\n      selectedIngredients,\r\n      totalPrice,\r\n    };\r\n    onOrder(orderedItem);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={true}\r\n      onRequestClose={onClose}\r\n      contentLabel=\"Customize Item\"\r\n      className=\"cart-modal\"\r\n      overlayClassName=\"cart-modal-overlay\"\r\n    >\r\n      <h2>{item.Name}</h2>\r\n      {item.PictureUrl && (\r\n        <img\r\n          src={item.PictureUrl}\r\n          alt={item.Name}\r\n          className=\"modal-item-image\"\r\n        />\r\n      )}\r\n      <div className=\"ingredients-section\">\r\n        <h3>Ingredients</h3>\r\n        {item.IngredientIds.map((id) => {\r\n          const ing = ingredients.find((i) => i.Id === id);\r\n          if (!ing) return null;\r\n          return (\r\n            <div key={id} className=\"ingredient-item\">\r\n              <span>{ing.Name}</span>\r\n              <div className=\"quantity-controls\">\r\n                <button\r\n                  onClick={() => handleIngredientChange(id, -1)}\r\n                  disabled={selectedIngredients[id] === 0}\r\n                >\r\n                  -\r\n                </button>\r\n                <span>{selectedIngredients[id]}</span>\r\n                <button onClick={() => handleIngredientChange(id, 1)}>+</button>\r\n              </div>\r\n              <span>\r\n                +$\r\n                {(\r\n                  (selectedIngredients[id] - ing.DefaultQuantity) *\r\n                  ing.ExtraCost\r\n                ).toFixed(2)}\r\n              </span>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"total-price\">\r\n        <h3>Total: ${totalPrice.toFixed(2)}</h3>\r\n      </div>\r\n      <div className=\"modal-actions\">\r\n        <button onClick={handleOrder}>Add to Order</button>\r\n        <button onClick={onClose}>Cancel</button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}