{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\AppContext.js\",\n  _s = $RefreshSig$();\nimport { SessionProvider } from \"next-auth/react\";\nimport { createContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext({});\nexport function cartProductPrice(cartProduct) {\n  var _cartProduct$extras;\n  let price = cartProduct.basePrice;\n  if (cartProduct.size) {\n    price += cartProduct.size.price;\n  }\n  if (((_cartProduct$extras = cartProduct.extras) === null || _cartProduct$extras === void 0 ? void 0 : _cartProduct$extras.length) > 0) {\n    for (const extra of cartProduct.extras) {\n      price += extra.price;\n    }\n  }\n  return price;\n}\nexport function AppProvider({\n  children\n}) {\n  _s();\n  const [cartProducts, setCartProducts] = useState([]);\n  const ls = typeof window !== \"undefined\" ? window.localStorage : null;\n  useEffect(() => {\n    if (ls && ls.getItem(\"cart\")) {\n      setCartProducts(JSON.parse(ls.getItem(\"cart\")));\n    }\n  }, []);\n  function clearCart() {\n    setCartProducts([]);\n    saveCartProductsToLocalStorage([]);\n  }\n  function removeCartProduct(indexToRemove) {\n    setCartProducts(prevCartProducts => {\n      const newCartProducts = prevCartProducts.filter((v, index) => index !== indexToRemove);\n      saveCartProductsToLocalStorage(newCartProducts);\n      return newCartProducts;\n    });\n    toast.success(\"Product removed\");\n  }\n  function saveCartProductsToLocalStorage(cartProducts) {\n    if (ls) {\n      ls.setItem(\"cart\", JSON.stringify(cartProducts));\n    }\n  }\n  function addToCart(product, size = null, extras = []) {\n    setCartProducts(prevProducts => {\n      const cartProduct = {\n        ...product,\n        size,\n        extras\n      };\n      const newProducts = [...prevProducts, cartProduct];\n      saveCartProductsToLocalStorage(newProducts);\n      return newProducts;\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(SessionProvider, {\n    children: /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n      value: {\n        cartProducts,\n        setCartProducts,\n        addToCart,\n        removeCartProduct,\n        clearCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(AppProvider, \"+8Ij0AViHg9P/LPeNfQkx+1yDFk=\");\n_c = AppProvider;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","SessionProvider","createContext","useEffect","useState","toast","jsxDEV","_jsxDEV","CartContext","cartProductPrice","cartProduct","_cartProduct$extras","price","basePrice","size","extras","length","extra","AppProvider","children","cartProducts","setCartProducts","ls","window","localStorage","getItem","JSON","parse","clearCart","saveCartProductsToLocalStorage","removeCartProduct","indexToRemove","prevCartProducts","newCartProducts","filter","v","index","success","setItem","stringify","addToCart","product","prevProducts","newProducts","Provider","value","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/AppContext.js"],"sourcesContent":["\"use client\";\r\nimport { SessionProvider } from \"next-auth/react\";\r\nimport { createContext, useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport const CartContext = createContext({});\r\n\r\nexport function cartProductPrice(cartProduct) {\r\n  let price = cartProduct.basePrice;\r\n  if (cartProduct.size) {\r\n    price += cartProduct.size.price;\r\n  }\r\n  if (cartProduct.extras?.length > 0) {\r\n    for (const extra of cartProduct.extras) {\r\n      price += extra.price;\r\n    }\r\n  }\r\n  return price;\r\n}\r\n\r\nexport function AppProvider({ children }) {\r\n  const [cartProducts, setCartProducts] = useState([]);\r\n\r\n  const ls = typeof window !== \"undefined\" ? window.localStorage : null;\r\n\r\n  useEffect(() => {\r\n    if (ls && ls.getItem(\"cart\")) {\r\n      setCartProducts(JSON.parse(ls.getItem(\"cart\")));\r\n    }\r\n  }, []);\r\n\r\n  function clearCart() {\r\n    setCartProducts([]);\r\n    saveCartProductsToLocalStorage([]);\r\n  }\r\n\r\n  function removeCartProduct(indexToRemove) {\r\n    setCartProducts((prevCartProducts) => {\r\n      const newCartProducts = prevCartProducts.filter(\r\n        (v, index) => index !== indexToRemove\r\n      );\r\n      saveCartProductsToLocalStorage(newCartProducts);\r\n      return newCartProducts;\r\n    });\r\n    toast.success(\"Product removed\");\r\n  }\r\n\r\n  function saveCartProductsToLocalStorage(cartProducts) {\r\n    if (ls) {\r\n      ls.setItem(\"cart\", JSON.stringify(cartProducts));\r\n    }\r\n  }\r\n\r\n  function addToCart(product, size = null, extras = []) {\r\n    setCartProducts((prevProducts) => {\r\n      const cartProduct = { ...product, size, extras };\r\n      const newProducts = [...prevProducts, cartProduct];\r\n      saveCartProductsToLocalStorage(newProducts);\r\n      return newProducts;\r\n    });\r\n  }\r\n\r\n  return (\r\n    <SessionProvider>\r\n      <CartContext.Provider\r\n        value={{\r\n          cartProducts,\r\n          setCartProducts,\r\n          addToCart,\r\n          removeCartProduct,\r\n          clearCart,\r\n        }}\r\n      >\r\n        {children}\r\n      </CartContext.Provider>\r\n    </SessionProvider>\r\n  );\r\n}\r\n"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,YAAA;EAAAC,EAAA,GAAAC,YAAA;AACb,SAASC,eAAe,QAAQ,iBAAiB;AACjD,SAASC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,CAAC,CAAC,CAAC;AAE5C,OAAO,SAASO,gBAAgBA,CAACC,WAAW,EAAE;EAAA,IAAAC,mBAAA;EAC5C,IAAIC,KAAK,GAAGF,WAAW,CAACG,SAAS;EACjC,IAAIH,WAAW,CAACI,IAAI,EAAE;IACpBF,KAAK,IAAIF,WAAW,CAACI,IAAI,CAACF,KAAK;EACjC;EACA,IAAI,EAAAD,mBAAA,GAAAD,WAAW,CAACK,MAAM,cAAAJ,mBAAA,uBAAlBA,mBAAA,CAAoBK,MAAM,IAAG,CAAC,EAAE;IAClC,KAAK,MAAMC,KAAK,IAAIP,WAAW,CAACK,MAAM,EAAE;MACtCH,KAAK,IAAIK,KAAK,CAACL,KAAK;IACtB;EACF;EACA,OAAOA,KAAK;AACd;AAEA,OAAO,SAASM,WAAWA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAApB,EAAA;EACxC,MAAM,CAACqB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAMkB,EAAE,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACC,YAAY,GAAG,IAAI;EAErErB,SAAS,CAAC,MAAM;IACd,IAAImB,EAAE,IAAIA,EAAE,CAACG,OAAO,CAAC,MAAM,CAAC,EAAE;MAC5BJ,eAAe,CAACK,IAAI,CAACC,KAAK,CAACL,EAAE,CAACG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IACjD;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,SAASG,SAASA,CAAA,EAAG;IACnBP,eAAe,CAAC,EAAE,CAAC;IACnBQ,8BAA8B,CAAC,EAAE,CAAC;EACpC;EAEA,SAASC,iBAAiBA,CAACC,aAAa,EAAE;IACxCV,eAAe,CAAEW,gBAAgB,IAAK;MACpC,MAAMC,eAAe,GAAGD,gBAAgB,CAACE,MAAM,CAC7C,CAACC,CAAC,EAAEC,KAAK,KAAKA,KAAK,KAAKL,aAC1B,CAAC;MACDF,8BAA8B,CAACI,eAAe,CAAC;MAC/C,OAAOA,eAAe;IACxB,CAAC,CAAC;IACF5B,KAAK,CAACgC,OAAO,CAAC,iBAAiB,CAAC;EAClC;EAEA,SAASR,8BAA8BA,CAACT,YAAY,EAAE;IACpD,IAAIE,EAAE,EAAE;MACNA,EAAE,CAACgB,OAAO,CAAC,MAAM,EAAEZ,IAAI,CAACa,SAAS,CAACnB,YAAY,CAAC,CAAC;IAClD;EACF;EAEA,SAASoB,SAASA,CAACC,OAAO,EAAE3B,IAAI,GAAG,IAAI,EAAEC,MAAM,GAAG,EAAE,EAAE;IACpDM,eAAe,CAAEqB,YAAY,IAAK;MAChC,MAAMhC,WAAW,GAAG;QAAE,GAAG+B,OAAO;QAAE3B,IAAI;QAAEC;MAAO,CAAC;MAChD,MAAM4B,WAAW,GAAG,CAAC,GAAGD,YAAY,EAAEhC,WAAW,CAAC;MAClDmB,8BAA8B,CAACc,WAAW,CAAC;MAC3C,OAAOA,WAAW;IACpB,CAAC,CAAC;EACJ;EAEA,oBACEpC,OAAA,CAACN,eAAe;IAAAkB,QAAA,eACdZ,OAAA,CAACC,WAAW,CAACoC,QAAQ;MACnBC,KAAK,EAAE;QACLzB,YAAY;QACZC,eAAe;QACfmB,SAAS;QACTV,iBAAiB;QACjBF;MACF,CAAE;MAAAT,QAAA,EAEDA;IAAQ;MAAA2B,QAAA,EAAAhD,YAAA;MAAAiD,UAAA;MAAAC,YAAA;IAAA,OACW;EAAC;IAAAF,QAAA,EAAAhD,YAAA;IAAAiD,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEtB;AAACjD,EAAA,CAzDemB,WAAW;AAAA+B,EAAA,GAAX/B,WAAW;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}