{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\Menu.js\",\n  _s = $RefreshSig$();\n// src/components/Menu.js\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Spinner, Alert } from \"react-bootstrap\";\nimport FilterPanel from \"./FilterPanel\";\nimport ItemCard from \"./ItemCard\";\nimport CartModal from \"./CartModal\";\nimport axios from \"axios\";\nimport { useCart } from \"../contexts/CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Menu = () => {\n  _s();\n  const [categories, setCategories] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [filters, setFilters] = useState({\n    items: [],\n    ingredients: []\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const {\n    showCartModal,\n    setShowCartModal,\n    selectedItem,\n    setSelectedItem\n  } = useCart();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [categoriesRes, ingredientsRes, itemsRes] = await Promise.all([axios.get(\"/api/Category\"), axios.get(\"/api/Ingredient\"), axios.get(\"/api/Item\")]);\n        setCategories(categoriesRes.data);\n        setIngredients(ingredientsRes.data);\n        setSelectedCategory(categoriesRes.data[0]); // Select the first category by default\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n        setError(true);\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (selectedCategory) {\n      let items = selectedCategory.Items || [];\n      // Apply filters\n      if (filters.items.length > 0) {\n        items = items.filter(item => filters.items.includes(item.Id));\n      }\n      if (filters.ingredients.length > 0) {\n        items = items.filter(item => item.IngredientIds.some(id => filters.ingredients.includes(id)));\n      }\n      setFilteredItems(items);\n    }\n  }, [selectedCategory, filters]);\n  const handleCategorySelect = category => {\n    setSelectedCategory(category);\n    setFilters({\n      items: [],\n      ingredients: []\n    }); // Reset filters when category changes\n  };\n  const handleAddToCart = item => {\n    setSelectedItem(item);\n    setShowCartModal(true);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      className: \"mt-5 text-center\",\n      children: \"Failed to load menu. Please try again later.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        children: /*#__PURE__*/_jsxDEV(FilterPanel, {\n          categories: categories,\n          ingredients: ingredients,\n          selectedCategory: selectedCategory,\n          setSelectedCategory: handleCategorySelect,\n          filters: filters,\n          setFilters: setFilters\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 9,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mt-4\",\n          children: selectedCategory === null || selectedCategory === void 0 ? void 0 : selectedCategory.Name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: filteredItems.length > 0 ? filteredItems.map(item => /*#__PURE__*/_jsxDEV(Col, {\n            sm: 12,\n            md: 6,\n            lg: 4,\n            className: \"mb-4\",\n            children: /*#__PURE__*/_jsxDEV(ItemCard, {\n              item: item,\n              onAddToCart: () => handleAddToCart(item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)\n          }, item.Id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No items found in this category.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), showCartModal && /*#__PURE__*/_jsxDEV(CartModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(Menu, \"suQDqhEbS1AMZGyKgu/fyvfJzJ4=\", false, function () {\n  return [useCart];\n});\n_c = Menu;\nexport default Menu;\nvar _c;\n$RefreshReg$(_c, \"Menu\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Spinner","Alert","FilterPanel","ItemCard","CartModal","axios","useCart","jsxDEV","_jsxDEV","Menu","_s","categories","setCategories","ingredients","setIngredients","selectedCategory","setSelectedCategory","filteredItems","setFilteredItems","filters","setFilters","items","loading","setLoading","error","setError","showCartModal","setShowCartModal","selectedItem","setSelectedItem","fetchData","categoriesRes","ingredientsRes","itemsRes","Promise","all","get","data","err","console","Items","length","filter","item","includes","Id","IngredientIds","some","id","handleCategorySelect","category","handleAddToCart","className","children","animation","fileName","_jsxFileName","lineNumber","columnNumber","variant","fluid","md","Name","map","sm","lg","onAddToCart","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/Menu.js"],"sourcesContent":["// src/components/Menu.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Container, Row, Col, Spinner, Alert } from \"react-bootstrap\";\r\nimport FilterPanel from \"./FilterPanel\";\r\nimport ItemCard from \"./ItemCard\";\r\nimport CartModal from \"./CartModal\";\r\nimport axios from \"axios\";\r\nimport { useCart } from \"../contexts/CartContext\";\r\n\r\nconst Menu = () => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [ingredients, setIngredients] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState(null);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    items: [],\r\n    ingredients: [],\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n\r\n  const { showCartModal, setShowCartModal, selectedItem, setSelectedItem } =\r\n    useCart();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [categoriesRes, ingredientsRes, itemsRes] = await Promise.all([\r\n          axios.get(\"/api/Category\"),\r\n          axios.get(\"/api/Ingredient\"),\r\n          axios.get(\"/api/Item\"),\r\n        ]);\r\n        setCategories(categoriesRes.data);\r\n        setIngredients(ingredientsRes.data);\r\n        setSelectedCategory(categoriesRes.data[0]); // Select the first category by default\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(true);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedCategory) {\r\n      let items = selectedCategory.Items || [];\r\n      // Apply filters\r\n      if (filters.items.length > 0) {\r\n        items = items.filter((item) => filters.items.includes(item.Id));\r\n      }\r\n      if (filters.ingredients.length > 0) {\r\n        items = items.filter((item) =>\r\n          item.IngredientIds.some((id) => filters.ingredients.includes(id))\r\n        );\r\n      }\r\n      setFilteredItems(items);\r\n    }\r\n  }, [selectedCategory, filters]);\r\n\r\n  const handleCategorySelect = (category) => {\r\n    setSelectedCategory(category);\r\n    setFilters({ items: [], ingredients: [] }); // Reset filters when category changes\r\n  };\r\n\r\n  const handleAddToCart = (item) => {\r\n    setSelectedItem(item);\r\n    setShowCartModal(true);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center mt-5\">\r\n        <Spinner animation=\"border\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Alert variant=\"danger\" className=\"mt-5 text-center\">\r\n        Failed to load menu. Please try again later.\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row>\r\n        <Col md={3}>\r\n          <FilterPanel\r\n            categories={categories}\r\n            ingredients={ingredients}\r\n            selectedCategory={selectedCategory}\r\n            setSelectedCategory={handleCategorySelect}\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n          />\r\n        </Col>\r\n        <Col md={9}>\r\n          <h2 className=\"mt-4\">{selectedCategory?.Name}</h2>\r\n          <Row>\r\n            {filteredItems.length > 0 ? (\r\n              filteredItems.map((item) => (\r\n                <Col key={item.Id} sm={12} md={6} lg={4} className=\"mb-4\">\r\n                  <ItemCard\r\n                    item={item}\r\n                    onAddToCart={() => handleAddToCart(item)}\r\n                  />\r\n                </Col>\r\n              ))\r\n            ) : (\r\n              <Col>\r\n                <p>No items found in this category.</p>\r\n              </Col>\r\n            )}\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      {showCartModal && <CartModal />}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}