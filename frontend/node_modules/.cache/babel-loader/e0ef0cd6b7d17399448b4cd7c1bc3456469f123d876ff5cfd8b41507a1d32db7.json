{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\CartModal.js\",\n  _s = $RefreshSig$();\n// src/components/CartModal.js\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Button, Form, ListGroup } from \"react-bootstrap\";\nimport { useCart } from \"../contexts/CartContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartModal = () => {\n  _s();\n  const {\n    showCartModal,\n    setShowCartModal,\n    selectedItem,\n    addToCart\n  } = useCart();\n  const [modifiedIngredients, setModifiedIngredients] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(selectedItem.Price);\n  useEffect(() => {\n    // Initialize modifiedIngredients with default quantities\n    const initialIngredients = selectedItem.Ingredients.map(ingredient => ({\n      ...ingredient,\n      quantity: ingredient.DefaultQuantity\n    }));\n    setModifiedIngredients(initialIngredients);\n    setTotalPrice(selectedItem.Price);\n  }, [selectedItem]);\n  const handleQuantityChange = (id, newQuantity) => {\n    const updatedIngredients = modifiedIngredients.map(ing => {\n      if (ing.Id === id) {\n        return {\n          ...ing,\n          quantity: newQuantity\n        };\n      }\n      return ing;\n    });\n    setModifiedIngredients(updatedIngredients);\n\n    // Recalculate price\n    const extraCosts = updatedIngredients.reduce((acc, ing) => {\n      if (ing.quantity > ing.DefaultQuantity) {\n        return acc + (ing.quantity - ing.DefaultQuantity) * ing.ExtraCost;\n      }\n      return acc;\n    }, 0);\n    setTotalPrice(selectedItem.Price + extraCosts);\n  };\n  const handleAddToOrder = () => {\n    const cartItem = {\n      ItemId: selectedItem.Id,\n      Count: 1,\n      // Default count\n      ModifiedIngredients: modifiedIngredients.map(ing => ({\n        IngredientId: ing.Id,\n        Quantity: ing.quantity\n      })),\n      TotalPrice: totalPrice\n    };\n    addToCart(cartItem);\n    setShowCartModal(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: showCartModal,\n    onHide: () => setShowCartModal(false),\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: selectedItem.Name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        variant: \"flush\",\n        children: modifiedIngredients.map(ingredient => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: [ingredient.Name, \" (Default: \", ingredient.DefaultQuantity, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            min: 0,\n            value: ingredient.quantity,\n            onChange: e => handleQuantityChange(ingredient.Id, parseInt(e.target.value) || 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)]\n        }, ingredient.Id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"mt-3\",\n        children: [\"Total Price: $\", totalPrice.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => setShowCartModal(false),\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: handleAddToOrder,\n        children: \"Add to Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(CartModal, \"+oROD3WD+Jwbmyuz32uCSNl/Epo=\", false, function () {\n  return [useCart];\n});\n_c = CartModal;\nexport default CartModal;\nvar _c;\n$RefreshReg$(_c, \"CartModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Form","ListGroup","useCart","axios","jsxDEV","_jsxDEV","CartModal","_s","showCartModal","setShowCartModal","selectedItem","addToCart","modifiedIngredients","setModifiedIngredients","totalPrice","setTotalPrice","Price","initialIngredients","Ingredients","map","ingredient","quantity","DefaultQuantity","handleQuantityChange","id","newQuantity","updatedIngredients","ing","Id","extraCosts","reduce","acc","ExtraCost","handleAddToOrder","cartItem","ItemId","Count","ModifiedIngredients","IngredientId","Quantity","TotalPrice","show","onHide","children","Header","closeButton","Title","fileName","_jsxFileName","lineNumber","columnNumber","Body","Name","variant","Item","Label","Control","type","min","value","onChange","e","parseInt","target","className","toFixed","Footer","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/CartModal.js"],"sourcesContent":["// src/components/CartModal.js\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Modal, Button, Form, ListGroup } from \"react-bootstrap\";\r\nimport { useCart } from \"../contexts/CartContext\";\r\nimport axios from \"axios\";\r\n\r\nconst CartModal = () => {\r\n  const { showCartModal, setShowCartModal, selectedItem, addToCart } =\r\n    useCart();\r\n\r\n  const [modifiedIngredients, setModifiedIngredients] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(selectedItem.Price);\r\n\r\n  useEffect(() => {\r\n    // Initialize modifiedIngredients with default quantities\r\n    const initialIngredients = selectedItem.Ingredients.map((ingredient) => ({\r\n      ...ingredient,\r\n      quantity: ingredient.DefaultQuantity,\r\n    }));\r\n    setModifiedIngredients(initialIngredients);\r\n    setTotalPrice(selectedItem.Price);\r\n  }, [selectedItem]);\r\n\r\n  const handleQuantityChange = (id, newQuantity) => {\r\n    const updatedIngredients = modifiedIngredients.map((ing) => {\r\n      if (ing.Id === id) {\r\n        return { ...ing, quantity: newQuantity };\r\n      }\r\n      return ing;\r\n    });\r\n    setModifiedIngredients(updatedIngredients);\r\n\r\n    // Recalculate price\r\n    const extraCosts = updatedIngredients.reduce((acc, ing) => {\r\n      if (ing.quantity > ing.DefaultQuantity) {\r\n        return acc + (ing.quantity - ing.DefaultQuantity) * ing.ExtraCost;\r\n      }\r\n      return acc;\r\n    }, 0);\r\n    setTotalPrice(selectedItem.Price + extraCosts);\r\n  };\r\n\r\n  const handleAddToOrder = () => {\r\n    const cartItem = {\r\n      ItemId: selectedItem.Id,\r\n      Count: 1, // Default count\r\n      ModifiedIngredients: modifiedIngredients.map((ing) => ({\r\n        IngredientId: ing.Id,\r\n        Quantity: ing.quantity,\r\n      })),\r\n      TotalPrice: totalPrice,\r\n    };\r\n\r\n    addToCart(cartItem);\r\n    setShowCartModal(false);\r\n  };\r\n\r\n  return (\r\n    <Modal show={showCartModal} onHide={() => setShowCartModal(false)}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Add to Cart</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <h5>{selectedItem.Name}</h5>\r\n        <ListGroup variant=\"flush\">\r\n          {modifiedIngredients.map((ingredient) => (\r\n            <ListGroup.Item key={ingredient.Id}>\r\n              <Form.Label>\r\n                {ingredient.Name} (Default: {ingredient.DefaultQuantity})\r\n              </Form.Label>\r\n              <Form.Control\r\n                type=\"number\"\r\n                min={0}\r\n                value={ingredient.quantity}\r\n                onChange={(e) =>\r\n                  handleQuantityChange(\r\n                    ingredient.Id,\r\n                    parseInt(e.target.value) || 0\r\n                  )\r\n                }\r\n              />\r\n            </ListGroup.Item>\r\n          ))}\r\n        </ListGroup>\r\n        <h5 className=\"mt-3\">Total Price: ${totalPrice.toFixed(2)}</h5>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setShowCartModal(false)}>\r\n          Close\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleAddToOrder}>\r\n          Add to Order\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CartModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}