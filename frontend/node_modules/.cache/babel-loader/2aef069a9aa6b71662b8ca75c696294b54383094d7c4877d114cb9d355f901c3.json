{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/pages/CartContext.js\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport api from \"../axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n\n// CartProvider component to wrap around parts of the app that need access to the cart\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n\n  // Fetch the current cart from the server\n  const fetchCart = async () => {\n    try {\n      const response = await api.get(\"/Cart\");\n      if (response.status === 200) {\n        console.log(\"Cart Data Received:\", response.data);\n        setCart(response.data.items || []);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch cart:\", error);\n      // Optionally, handle errors (e.g., show a notification)\n    }\n  };\n\n  // Add an item to the cart with extras and totalPrice\n  const addToCart = async cartItem => {\n    try {\n      // Destructure necessary fields from cartItem\n      const {\n        id: ItemId,\n        extras = [],\n        quantity = 1\n      } = cartItem;\n\n      // Prepare IngredientQuantities\n      // Assuming that extras are the additional ingredients\n      // and that the base ingredients are already part of the item\n      const IngredientQuantities = extras.map(extra => ({\n        IngredientId: extra.id,\n        Quantity: extra.quantity\n      }));\n\n      // Prepare the payload\n      const payload = {\n        ItemId,\n        Quantity: quantity,\n        IngredientQuantities\n      };\n\n      // Make API call to add item to cart\n      const response = await api.post(\"/Cart/add\", payload);\n      if (response.status === 200) {\n        // Fetch the updated cart\n        await fetchCart();\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Failed to add item to cart:\", error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An error occurred while adding to cart.\");\n    }\n  };\n\n  // Remove an item from the cart\n  const removeFromCart = async cartItemId => {\n    try {\n      const payload = {\n        CartItemId: cartItemId\n      };\n      const response = await api.post(\"/Cart/remove\", payload);\n      if (response.status === 200) {\n        // Fetch the updated cart\n        await fetchCart();\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Failed to remove item from cart:\", error);\n      alert(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"An error occurred while removing from cart.\");\n    }\n  };\n\n  // Clear the cart\n  const clearCart = async () => {\n    try {\n      const response = await api.post(\"/Cart/clear\");\n      if (response.status === 200) {\n        setCart([]);\n      }\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error(\"Failed to clear cart:\", error);\n      alert(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"An error occurred while clearing the cart.\");\n    }\n  };\n  useEffect(() => {\n    fetchCart();\n    // Optionally, set up polling or subscriptions for real-time updates\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      clearCart,\n      fetchCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"5+HPoxSo1E/C3go3F1eDhM/DDhE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","api","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cart","setCart","fetchCart","response","get","status","console","log","data","items","error","addToCart","cartItem","id","ItemId","extras","quantity","IngredientQuantities","map","extra","IngredientId","Quantity","payload","post","_error$response","_error$response$data","alert","message","removeFromCart","cartItemId","CartItemId","_error$response2","_error$response2$data","clearCart","_error$response3","_error$response3$data","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/CartContext.js"],"sourcesContent":["// src/pages/CartContext.js\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport api from \"../axiosInstance\";\r\n\r\nconst CartContext = createContext();\r\n\r\n// Custom hook to use the CartContext\r\nexport const useCart = () => useContext(CartContext);\r\n\r\n// CartProvider component to wrap around parts of the app that need access to the cart\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n\r\n  // Fetch the current cart from the server\r\n  const fetchCart = async () => {\r\n    try {\r\n      const response = await api.get(\"/Cart\");\r\n\r\n      if (response.status === 200) {\r\n        console.log(\"Cart Data Received:\", response.data);\r\n        setCart(response.data.items || []);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch cart:\", error);\r\n      // Optionally, handle errors (e.g., show a notification)\r\n    }\r\n  };\r\n\r\n  // Add an item to the cart with extras and totalPrice\r\n  const addToCart = async (cartItem) => {\r\n    try {\r\n      // Destructure necessary fields from cartItem\r\n      const { id: ItemId, extras = [], quantity = 1 } = cartItem;\r\n\r\n      // Prepare IngredientQuantities\r\n      // Assuming that extras are the additional ingredients\r\n      // and that the base ingredients are already part of the item\r\n      const IngredientQuantities = extras.map((extra) => ({\r\n        IngredientId: extra.id,\r\n        Quantity: extra.quantity,\r\n      }));\r\n\r\n      // Prepare the payload\r\n      const payload = {\r\n        ItemId,\r\n        Quantity: quantity,\r\n        IngredientQuantities,\r\n      };\r\n\r\n      // Make API call to add item to cart\r\n      const response = await api.post(\"/Cart/add\", payload);\r\n\r\n      if (response.status === 200) {\r\n        // Fetch the updated cart\r\n        await fetchCart();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to add item to cart:\", error);\r\n      alert(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while adding to cart.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  // Remove an item from the cart\r\n  const removeFromCart = async (cartItemId) => {\r\n    try {\r\n      const payload = { CartItemId: cartItemId };\r\n\r\n      const response = await api.post(\"/Cart/remove\", payload);\r\n\r\n      if (response.status === 200) {\r\n        // Fetch the updated cart\r\n        await fetchCart();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to remove item from cart:\", error);\r\n      alert(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while removing from cart.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  // Clear the cart\r\n  const clearCart = async () => {\r\n    try {\r\n      const response = await api.post(\"/Cart/clear\");\r\n\r\n      if (response.status === 200) {\r\n        setCart([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to clear cart:\", error);\r\n      alert(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while clearing the cart.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n    // Optionally, set up polling or subscriptions for real-time updates\r\n  }, []);\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{ cart, addToCart, removeFromCart, clearCart, fetchCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}