{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Domas\\\\Desktop\\\\5 semestras\\\\Brewtiful\\\\frontend\\\\src\\\\pages\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/components/CartContext.js\nimport React, { createContext, useContext, useState } from \"react\";\nimport api from \"../axiosInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cart, setCart] = useState([]);\n  const addToCart = async (item, ingredientsInfo, ingredientQuantities, totalPrice) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"You need to be logged in to add items to the cart.\");\n        return;\n      }\n\n      // Prepare the payload\n      const payload = {\n        ItemId: item.id,\n        Quantity: 1,\n        // or dynamic based on user input\n        IngredientQuantities: ingredientQuantities\n      };\n\n      // Make API call to add item to cart\n      const response = await api.post(\"/Cart/add\", payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 200) {\n        // Optionally, update local cart state or fetch the updated cart\n        // For simplicity, you can fetch the updated cart\n        fetchCart();\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Failed to add item to cart:\", error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An error occurred while adding to cart.\");\n    }\n  };\n  const fetchCart = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) return;\n      const response = await api.get(\"/Cart\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 200) {\n        setCart(response.data.Items);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch cart:\", error);\n    }\n  };\n  const removeFromCart = async itemId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        alert(\"You need to be logged in to remove items from the cart.\");\n        return;\n      }\n      const payload = {\n        ItemId: itemId\n      };\n      const response = await api.post(\"/Cart/remove\", payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 200) {\n        // Update local cart state or fetch the updated cart\n        fetchCart();\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Failed to remove item from cart:\", error);\n      alert(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"An error occurred while removing from cart.\");\n    }\n  };\n  const clearCart = () => setCart([]);\n\n  // Optionally, fetch the cart when the provider mounts\n  React.useEffect(() => {\n    fetchCart();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"5+HPoxSo1E/C3go3F1eDhM/DDhE=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","api","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cart","setCart","addToCart","item","ingredientsInfo","ingredientQuantities","totalPrice","token","localStorage","getItem","alert","payload","ItemId","id","Quantity","IngredientQuantities","response","post","headers","Authorization","status","fetchCart","error","_error$response","_error$response$data","console","data","message","get","Items","removeFromCart","itemId","_error$response2","_error$response2$data","clearCart","useEffect","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Domas/Desktop/5 semestras/Brewtiful/frontend/src/pages/CartContext.js"],"sourcesContent":["// src/components/CartContext.js\r\nimport React, { createContext, useContext, useState } from \"react\";\r\nimport api from \"../axiosInstance\";\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n\r\n  const addToCart = async (\r\n    item,\r\n    ingredientsInfo,\r\n    ingredientQuantities,\r\n    totalPrice\r\n  ) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        alert(\"You need to be logged in to add items to the cart.\");\r\n        return;\r\n      }\r\n\r\n      // Prepare the payload\r\n      const payload = {\r\n        ItemId: item.id,\r\n        Quantity: 1, // or dynamic based on user input\r\n        IngredientQuantities: ingredientQuantities,\r\n      };\r\n\r\n      // Make API call to add item to cart\r\n      const response = await api.post(\"/Cart/add\", payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        // Optionally, update local cart state or fetch the updated cart\r\n        // For simplicity, you can fetch the updated cart\r\n        fetchCart();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to add item to cart:\", error);\r\n      alert(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while adding to cart.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n\r\n      const response = await api.get(\"/Cart\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        setCart(response.data.Items);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch cart:\", error);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (itemId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        alert(\"You need to be logged in to remove items from the cart.\");\r\n        return;\r\n      }\r\n\r\n      const payload = { ItemId: itemId };\r\n\r\n      const response = await api.post(\"/Cart/remove\", payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        // Update local cart state or fetch the updated cart\r\n        fetchCart();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to remove item from cart:\", error);\r\n      alert(\r\n        error.response?.data?.message ||\r\n          \"An error occurred while removing from cart.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const clearCart = () => setCart([]);\r\n\r\n  // Optionally, fetch the cart when the provider mounts\r\n  React.useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{ cart, addToCart, removeFromCart, clearCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAClE,OAAOC,GAAG,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,WAAW,gBAAGN,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMO,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMP,UAAU,CAACK,WAAW,CAAC;AAAA;AAACE,EAAA,CAAxCD,OAAO;AAEpB,OAAO,MAAME,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC5C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAEpC,MAAMY,SAAS,GAAG,MAAAA,CAChBC,IAAI,EACJC,eAAe,EACfC,oBAAoB,EACpBC,UAAU,KACP;IACH,IAAI;MACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACVG,KAAK,CAAC,oDAAoD,CAAC;QAC3D;MACF;;MAEA;MACA,MAAMC,OAAO,GAAG;QACdC,MAAM,EAAET,IAAI,CAACU,EAAE;QACfC,QAAQ,EAAE,CAAC;QAAE;QACbC,oBAAoB,EAAEV;MACxB,CAAC;;MAED;MACA,MAAMW,QAAQ,GAAG,MAAMzB,GAAG,CAAC0B,IAAI,CAAC,WAAW,EAAEN,OAAO,EAAE;QACpDO,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIS,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QAC3B;QACA;QACAC,SAAS,CAAC,CAAC;MACb;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACdC,OAAO,CAACH,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDZ,KAAK,CACH,EAAAa,eAAA,GAAAD,KAAK,CAACN,QAAQ,cAAAO,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBG,IAAI,cAAAF,oBAAA,uBAApBA,oBAAA,CAAsBG,OAAO,KAC3B,yCACJ,CAAC;IACH;EACF,CAAC;EAED,MAAMN,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMd,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;MAEZ,MAAMS,QAAQ,GAAG,MAAMzB,GAAG,CAACqC,GAAG,CAAC,OAAO,EAAE;QACtCV,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIS,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QAC3BnB,OAAO,CAACe,QAAQ,CAACU,IAAI,CAACG,KAAK,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOP,KAAK,EAAE;MACdG,OAAO,CAACH,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C;EACF,CAAC;EAED,MAAMQ,cAAc,GAAG,MAAOC,MAAM,IAAK;IACvC,IAAI;MACF,MAAMxB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACVG,KAAK,CAAC,yDAAyD,CAAC;QAChE;MACF;MAEA,MAAMC,OAAO,GAAG;QAAEC,MAAM,EAAEmB;MAAO,CAAC;MAElC,MAAMf,QAAQ,GAAG,MAAMzB,GAAG,CAAC0B,IAAI,CAAC,cAAc,EAAEN,OAAO,EAAE;QACvDO,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEF,IAAIS,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QAC3B;QACAC,SAAS,CAAC,CAAC;MACb;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MAAA,IAAAU,gBAAA,EAAAC,qBAAA;MACdR,OAAO,CAACH,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxDZ,KAAK,CACH,EAAAsB,gBAAA,GAAAV,KAAK,CAACN,QAAQ,cAAAgB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBN,IAAI,cAAAO,qBAAA,uBAApBA,qBAAA,CAAsBN,OAAO,KAC3B,6CACJ,CAAC;IACH;EACF,CAAC;EAED,MAAMO,SAAS,GAAGA,CAAA,KAAMjC,OAAO,CAAC,EAAE,CAAC;;EAEnC;EACAd,KAAK,CAACgD,SAAS,CAAC,MAAM;IACpBd,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE5B,OAAA,CAACC,WAAW,CAAC0C,QAAQ;IACnBC,KAAK,EAAE;MAAErC,IAAI;MAAEE,SAAS;MAAE4B,cAAc;MAAEI;IAAU,CAAE;IAAApC,QAAA,EAErDA;EAAQ;IAAAwC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAC1C,GAAA,CApGWF,YAAY;AAAA6C,EAAA,GAAZ7C,YAAY;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}